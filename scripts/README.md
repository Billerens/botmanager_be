# Скрипты для управления Docker Compose

Этот набор скриптов предоставляет удобный интерфейс для управления различными конфигурациями Docker Compose в проекте BotManager.

## Доступные скрипты

### Windows (`.bat`)

- `start-dev.bat` - Интерактивный скрипт с меню выбора (русский)
- `start-dev-en.bat` - Интерактивный скрипт с меню выбора (английский)

### Linux/macOS (`.sh`)

- `start-dev.sh` - Интерактивный скрипт с меню выбора

## Использование

### Windows

```cmd
# Запуск интерактивного меню (русский)
scripts\start-dev.bat

# Запуск интерактивного меню (английский)
scripts\start-dev-en.bat
```

### Linux/macOS

```bash
# Сделать скрипт исполняемым (только при первом запуске)
chmod +x scripts/start-dev.sh

# Запуск интерактивного меню
./scripts/start-dev.sh
```

## Опции меню

### 1. Базовые сервисы

Запускает только основные сервисы:

- PostgreSQL (порт 5432)
- Redis (порт 6379)

### 2. С инструментами разработки

Добавляет к базовым сервисам:

- pgAdmin (порт 5050) - веб-интерфейс для PostgreSQL
- Redis Commander (порт 8081) - веб-интерфейс для Redis

### 3. С системой логирования

Добавляет к базовым сервисам:

- Loki (порт 3100) - система сбора логов
- Grafana (порт 3002) - визуализация логов

### 4. Полная конфигурация

Запускает все сервисы одновременно (базовые + инструменты + логирование)

### 5. Показать статус сервисов

Отображает текущий статус всех контейнеров

### 6. Остановить все сервисы

Останавливает и удаляет все контейнеры

### 7. Перезапустить сервисы

Останавливает и заново запускает все сервисы

### 8. Показать логи

Интерактивное меню для просмотра логов конкретных сервисов

### 9. Выход

Завершение работы скрипта

## Информация о подключении

После успешного запуска сервисов скрипт покажет информацию о подключении:

### Базовые сервисы

- **PostgreSQL**: `localhost:5432`
- **Redis**: `localhost:6379` (пароль: `botmanager_redis_password`)

### Инструменты разработки

- **pgAdmin**: http://localhost:5050
  - Email: `admin@botmanager.dev`
  - Password: `admin123`
- **Redis Commander**: http://localhost:8081
  - Username: `admin`
  - Password: `admin123`

### Система логирования

- **Loki**: http://localhost:3100
- **Grafana**: http://localhost:3002
  - Username: `admin`
  - Password: `admin123`

## Требования

- Docker и Docker Compose должны быть установлены и запущены
- Скрипты должны запускаться из корневой директории проекта (где находится `docker-compose.yml`)

## Устранение неполадок

### Проблемы с кодировкой (Windows)

Если русские символы отображаются как кракозябры, используйте английскую версию:

```cmd
scripts\start-dev-en.bat
```

Или настройте кодировку консоли вручную:

```cmd
chcp 65001
scripts\start-dev.bat
```

### Ошибка "Docker is not running"

Убедитесь, что Docker Desktop (Windows/macOS) или Docker daemon (Linux) запущен.

### Ошибка "Permission denied" (Linux/macOS)

Выполните команду:

```bash
chmod +x scripts/start-dev.sh
```

### Порты заняты

Если порты уже используются другими приложениями, остановите их или измените порты в `docker-compose.yml`.

## Профили Docker Compose

Скрипты используют систему профилей Docker Compose:

- **Без профиля**: `postgres-dev`, `redis-dev`
- **Профиль `tools`**: `pgadmin-dev`, `redis-commander-dev`
- **Профиль `logging`**: `loki-dev`, `grafana-dev`

Это позволяет гибко управлять тем, какие сервисы запускать в зависимости от потребностей разработки.
